{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./DailyCaloriesForm.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DailyCaloriesForm=_ref=>{let{initialValues}=_ref;const[formData,setFormData]=useState({height:'',age:'',currentWeight:'',desiredWeight:'',bloodType:'1'});const[calories,setCalories]=useState(null);const[allForbiddenFoods,setAllForbiddenFoods]=useState([]);const[forbiddenFoods,setForbiddenFoods]=useState([]);const[modalOpen,setModalOpen]=useState(false);const navigate=useNavigate();useEffect(()=>{if(initialValues){setFormData(initialValues);}},[initialValues]);const handleChange=e=>{const{name,value}=e.target;setFormData(prevData=>({...prevData,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{const response=await axios.post('http://localhost:5000/dailycalorieintake',formData);setCalories(response.data.calories);setForbiddenFoods(response.data.forbiddenFoods);const allForbiddenFoods=response.data.allForbiddenFoods||[];const currentDate=new Date().toLocaleDateString('ro-RO').replace(/\\//g,'.');localStorage.setItem('calorieFormData',JSON.stringify(formData));localStorage.setItem('caloriesData',JSON.stringify({dailyRate:response.data.calories,consumed:0,forbiddenFoods:response.data.forbiddenFoods,allForbiddenFoods:allForbiddenFoods,dateCompleted:currentDate}));setModalOpen(true);}catch(error){console.error('Error calculating calories:',error);}};const closeModal=()=>{setModalOpen(false);};useEffect(()=>{document.body.classList.toggle('modal-open-main',modalOpen);},[modalOpen]);const redirectToLogin=()=>{navigate('/login');};return/*#__PURE__*/_jsxs(\"div\",{children:[modalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"overlay-main\",onClick:closeModal}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"column\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Height (cm)*\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"height\",required:true,onChange:handleChange,value:formData.height})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Age (years)*\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",required:true,onChange:handleChange,value:formData.age})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Current weight (kg)*\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"currentWeight\",required:true,onChange:handleChange,value:formData.currentWeight})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"column\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Desired weight (kg)*\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"desiredWeight\",required:true,onChange:handleChange,value:formData.desiredWeight})]}),/*#__PURE__*/_jsx(\"label\",{children:\"Blood type*\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"blood-type-options\",children:[['1','2','3','4'].map(type=>/*#__PURE__*/_jsxs(\"label\",{className:`blood-type-label ${formData.bloodType===type?'active':''}`,children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"bloodType\",value:type,checked:formData.bloodType===type,onChange:handleChange}),/*#__PURE__*/_jsx(\"span\",{className:\"radio-circle\"}),/*#__PURE__*/_jsx(\"span\",{className:\"blood-type-number\",children:type})]},type)),/*#__PURE__*/_jsx(\"button\",{className:\"submit-btn\",type:\"submit\",children:\"Start losing weight\"})]})]})]}),modalOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"modal-main\",onClick:closeModal,children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:closeModal,children:\"\\xD7\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content-main\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"button\",{onClick:closeModal,className:\"modal-btn-main\",children:\"\\uD83E\\uDC14\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"modal-main-title\",children:\"Your recommended daily calorie intake is\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"kcal-p\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"kcal\",children:calories}),\" kcal\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Foods you should not eat\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"modal-list-main\",children:forbiddenFoods.map((food,index)=>/*#__PURE__*/_jsx(\"li\",{children:food},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-main-start-btn\",onClick:redirectToLogin,children:\"Start losing weight\"})]})]})]});};export default DailyCaloriesForm;","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","DailyCaloriesForm","_ref","initialValues","formData","setFormData","height","age","currentWeight","desiredWeight","bloodType","calories","setCalories","allForbiddenFoods","setAllForbiddenFoods","forbiddenFoods","setForbiddenFoods","modalOpen","setModalOpen","navigate","handleChange","e","name","value","target","prevData","handleSubmit","preventDefault","response","post","data","currentDate","Date","toLocaleDateString","replace","localStorage","setItem","JSON","stringify","dailyRate","consumed","dateCompleted","error","console","closeModal","document","body","classList","toggle","redirectToLogin","children","className","onClick","onSubmit","type","required","onChange","map","checked","stopPropagation","food","index"],"sources":["C:/Users/rebec/Desktop/SlimMom/src/components/DailyCaloriesForm/DailyCaloriesForm.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './DailyCaloriesForm.css';\r\n\r\nconst DailyCaloriesForm = ({ initialValues }) => {\r\n  const [formData, setFormData] = useState({\r\n    height: '',\r\n    age: '',\r\n    currentWeight: '',\r\n    desiredWeight: '',\r\n    bloodType: '1',\r\n  });\r\n\r\n  const [calories, setCalories] = useState(null);\r\n  const [allForbiddenFoods, setAllForbiddenFoods] = useState([]);\r\n  const [forbiddenFoods, setForbiddenFoods] = useState([]);\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (initialValues) {\r\n      setFormData(initialValues);\r\n    }\r\n  }, [initialValues]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prevData) => ({ ...prevData, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/dailycalorieintake', formData);\r\n      setCalories(response.data.calories);\r\n      setForbiddenFoods(response.data.forbiddenFoods);\r\n      \r\n      const allForbiddenFoods = response.data.allForbiddenFoods || [];\r\n      const currentDate = new Date().toLocaleDateString('ro-RO').replace(/\\//g, '.');\r\n\r\n      localStorage.setItem('calorieFormData', JSON.stringify(formData));\r\n      localStorage.setItem('caloriesData', JSON.stringify({\r\n        dailyRate: response.data.calories,\r\n        consumed: 0,\r\n        forbiddenFoods: response.data.forbiddenFoods,\r\n        allForbiddenFoods: allForbiddenFoods,\r\n        dateCompleted: currentDate,\r\n      }));\r\n\r\n      setModalOpen(true);\r\n    } catch (error) {\r\n      console.error('Error calculating calories:', error);\r\n    }\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.body.classList.toggle('modal-open-main', modalOpen);\r\n  }, [modalOpen]);\r\n\r\n  const redirectToLogin = () => {\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {modalOpen && <div className=\"overlay-main\" onClick={closeModal}>\r\n    </div>}\r\n\r\n      <form onSubmit={handleSubmit} className=\"form\">\r\n        <div className=\"column\">\r\n          <label>\r\n            Height (cm)*\r\n            <input\r\n              type=\"number\"\r\n              name=\"height\"\r\n              required\r\n              onChange={handleChange}\r\n              value={formData.height}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            Age (years)*\r\n            <input\r\n              type=\"number\"\r\n              name=\"age\"\r\n              required\r\n              onChange={handleChange}\r\n              value={formData.age}\r\n            />\r\n          </label>\r\n\r\n          <label>\r\n            Current weight (kg)*\r\n            <input\r\n              type=\"number\"\r\n              name=\"currentWeight\"\r\n              required\r\n              onChange={handleChange}\r\n              value={formData.currentWeight}\r\n            />\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"column\">\r\n          <label>\r\n            Desired weight (kg)*\r\n            <input\r\n              type=\"number\"\r\n              name=\"desiredWeight\"\r\n              required\r\n              onChange={handleChange}\r\n              value={formData.desiredWeight}\r\n            />\r\n          </label>\r\n\r\n          <label>Blood type*</label>\r\n          <div className=\"blood-type-options\">\r\n            {['1', '2', '3', '4'].map((type) => (\r\n              <label key={type} className={`blood-type-label ${formData.bloodType === type ? 'active' : ''}`}>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"bloodType\"\r\n                  value={type}\r\n                  checked={formData.bloodType === type}\r\n                  onChange={handleChange}\r\n                />\r\n                <span className=\"radio-circle\"></span>\r\n                <span className=\"blood-type-number\">{type}</span>\r\n              </label>\r\n            ))}\r\n                    <button className=\"submit-btn\" type=\"submit\" >\r\n          Start losing weight\r\n        </button>\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </form>\r\n\r\n      {modalOpen && (\r\n        <div className=\"modal-main\" onClick={closeModal}>\r\n          <button className=\"close-btn\" onClick={closeModal}>&times;</button>\r\n          <div className=\"modal-content-main\" onClick={(e) => e.stopPropagation()}>\r\n            <button onClick={closeModal} className=\"modal-btn-main\">🠔</button>\r\n            <h3 className='modal-main-title'>Your recommended daily calorie intake is</h3>\r\n            <p className='kcal-p'><span className='kcal'>{calories}</span> kcal</p>\r\n            <hr />\r\n            <h4>Foods you should not eat</h4>\r\n            <ul className='modal-list-main'>\r\n              {forbiddenFoods.map((food, index) => <li key={index}>{food}</li>)}\r\n            </ul>\r\n            <button className=\"modal-main-start-btn\" onClick={redirectToLogin}>\r\n              Start losing weight\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DailyCaloriesForm;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}