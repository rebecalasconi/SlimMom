{"ast":null,"code":"const mongoose = require('mongoose');\nconst bcrypt = require('bcryptjs');\nconst jwt = require('jsonwebtoken');\nrequire('dotenv').config();\nconst userSchema = new mongoose.Schema({\n  email: {\n    type: String,\n    required: [true, 'Email is required'],\n    unique: true\n  },\n  password: {\n    type: String,\n    required: [true, 'Password is required']\n  },\n  subscription: {\n    type: String,\n    enum: ['starter', 'pro', 'business'],\n    default: 'starter'\n  },\n  token: {\n    type: String,\n    default: null\n  },\n  avatarURL: {\n    type: String,\n    default: null\n  },\n  verify: {\n    type: Boolean,\n    default: false\n  },\n  verificationToken: {\n    type: String,\n    required: false\n  }\n});\nuserSchema.pre('save', async function (next) {\n  if (this.isModified('password')) {\n    this.password = await bcrypt.hash(this.password, 10);\n  }\n  next();\n});\nuserSchema.methods.generateAuthToken = function () {\n  const token = jwt.sign({\n    id: this._id\n  }, process.env.JWT_SECRET, {\n    expiresIn: '1h'\n  });\n  console.log(this._id);\n  this.token = token;\n  return token;\n};\nconst User = mongoose.model('User', userSchema);\nmodule.exports = User;","map":{"version":3,"names":["mongoose","require","bcrypt","jwt","config","userSchema","Schema","email","type","String","required","unique","password","subscription","enum","default","token","avatarURL","verify","Boolean","verificationToken","pre","next","isModified","hash","methods","generateAuthToken","sign","id","_id","process","env","JWT_SECRET","expiresIn","console","log","User","model","module","exports"],"sources":["C:/Users/rebec/Desktop/SlimMom/src/models/Users.js"],"sourcesContent":["\r\nconst mongoose = require('mongoose');\r\nconst bcrypt = require('bcryptjs');\r\nconst jwt = require('jsonwebtoken');\r\nrequire('dotenv').config();\r\nconst userSchema = new mongoose.Schema({\r\n  email: {\r\n    type: String,\r\n    required: [true, 'Email is required'],\r\n    unique: true,\r\n  },\r\n  password: {\r\n    type: String,\r\n    required: [true, 'Password is required'],\r\n  },\r\n  subscription: {\r\n    type: String,\r\n    enum: ['starter', 'pro', 'business'],\r\n    default: 'starter',\r\n  },\r\n  token: {\r\n    type: String,\r\n    default: null,\r\n  },\r\n  avatarURL: {\r\n    type: String,\r\n    default: null\r\n  },\r\n    verify: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    verificationToken: {\r\n      type: String,\r\n      required: false,\r\n    },\r\n});\r\n\r\nuserSchema.pre('save', async function (next) {\r\n  if (this.isModified('password')) {\r\n    this.password = await bcrypt.hash(this.password, 10);\r\n  }\r\n  next();\r\n});\r\n\r\nuserSchema.methods.generateAuthToken = function () {\r\n  const token = jwt.sign({ id: this._id }, process.env.JWT_SECRET, { expiresIn: '1h' });\r\n  console.log(this._id)\r\n  this.token = token;\r\n  return token;\r\n};\r\n\r\nconst User = mongoose.model('User', userSchema);\r\n\r\nmodule.exports = User;"],"mappings":"AACA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,MAAM,GAAGD,OAAO,CAAC,UAAU,CAAC;AAClC,MAAME,GAAG,GAAGF,OAAO,CAAC,cAAc,CAAC;AACnCA,OAAO,CAAC,QAAQ,CAAC,CAACG,MAAM,CAAC,CAAC;AAC1B,MAAMC,UAAU,GAAG,IAAIL,QAAQ,CAACM,MAAM,CAAC;EACrCC,KAAK,EAAE;IACLC,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,CAAC,IAAI,EAAE,mBAAmB,CAAC;IACrCC,MAAM,EAAE;EACV,CAAC;EACDC,QAAQ,EAAE;IACRJ,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE,CAAC,IAAI,EAAE,sBAAsB;EACzC,CAAC;EACDG,YAAY,EAAE;IACZL,IAAI,EAAEC,MAAM;IACZK,IAAI,EAAE,CAAC,SAAS,EAAE,KAAK,EAAE,UAAU,CAAC;IACpCC,OAAO,EAAE;EACX,CAAC;EACDC,KAAK,EAAE;IACLR,IAAI,EAAEC,MAAM;IACZM,OAAO,EAAE;EACX,CAAC;EACDE,SAAS,EAAE;IACTT,IAAI,EAAEC,MAAM;IACZM,OAAO,EAAE;EACX,CAAC;EACCG,MAAM,EAAE;IACNV,IAAI,EAAEW,OAAO;IACbJ,OAAO,EAAE;EACX,CAAC;EACDK,iBAAiB,EAAE;IACjBZ,IAAI,EAAEC,MAAM;IACZC,QAAQ,EAAE;EACZ;AACJ,CAAC,CAAC;AAEFL,UAAU,CAACgB,GAAG,CAAC,MAAM,EAAE,gBAAgBC,IAAI,EAAE;EAC3C,IAAI,IAAI,CAACC,UAAU,CAAC,UAAU,CAAC,EAAE;IAC/B,IAAI,CAACX,QAAQ,GAAG,MAAMV,MAAM,CAACsB,IAAI,CAAC,IAAI,CAACZ,QAAQ,EAAE,EAAE,CAAC;EACtD;EACAU,IAAI,CAAC,CAAC;AACR,CAAC,CAAC;AAEFjB,UAAU,CAACoB,OAAO,CAACC,iBAAiB,GAAG,YAAY;EACjD,MAAMV,KAAK,GAAGb,GAAG,CAACwB,IAAI,CAAC;IAAEC,EAAE,EAAE,IAAI,CAACC;EAAI,CAAC,EAAEC,OAAO,CAACC,GAAG,CAACC,UAAU,EAAE;IAAEC,SAAS,EAAE;EAAK,CAAC,CAAC;EACrFC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACN,GAAG,CAAC;EACrB,IAAI,CAACb,KAAK,GAAGA,KAAK;EAClB,OAAOA,KAAK;AACd,CAAC;AAED,MAAMoB,IAAI,GAAGpC,QAAQ,CAACqC,KAAK,CAAC,MAAM,EAAEhC,UAAU,CAAC;AAE/CiC,MAAM,CAACC,OAAO,GAAGH,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}